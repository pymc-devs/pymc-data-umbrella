name: Get translations from transifex

on:
  schedule:
    - cron: '17 5 * * 1'

jobs:
  txpull:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v3
      - name: Pull from transifex
        run: |
          curl -o- https://raw.githubusercontent.com/transifex/cli/master/install.sh | bash
          ./tx --token ${{ secrets.TX_TOKEN }} pull --all
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v4
        with:
          commit-message: Update translations
          title: Update translations
          body: |
            - Get translations from transifex and update the repo

            Auto-generated by [create-pull-request][1]

            [1]: https://github.com/peter-evans/create-pull-request
          branch: update-translations
          delete-branch: true
